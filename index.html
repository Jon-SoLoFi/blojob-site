<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>$BLOJOB ‚Äî Come Get This Pump</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="blojob.png" sizes="16x16" type="image/png">
<link rel="icon" href="blojob.png" sizes="32x32" type="image/png">
<link rel="icon" href="blojob.png" sizes="48x48" type="image/png">
<link rel="icon" href="blojob.png" sizes="96x96" type="image/png">
<link rel="apple-touch-icon" href="blojob.png">
<link rel="manifest" href="site.webmanifest">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
  :root {
    --purple-main: #b026ff;
    --purple-purple: #7b2cff;
    --purple-neon: #d896ff;
    --bg-dark: #070712;
    --bg-card: #11111f;
    --border-subtle: #262640;
    --text-soft: #c7c7ff;
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    background: radial-gradient(circle at top, #17172a 0, #070712 55%);
    color: #fff;
    font-family: 'Poppins', sans-serif;
  }

  header {
    text-align: center;
    padding: 60px 20px 40px;
    background: radial-gradient(circle at top, var(--purple-main), #1b082f 55%, #070712 100%);
    box-shadow: 0 6px 24px rgba(0,0,0,0.6);
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }

  .logo-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 14px;
  }

  .logo-wrap img {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 0 32px rgba(0,0,0,0.6);
    border: 2px solid rgba(255,255,255,0.18);
  }

  h1 { font-size: 3.2rem; font-weight: 800; margin: 0; }
  h2 { font-size: 1.4rem; opacity: 0.9; margin-top: 6px; }

  .section {
    max-width: 900px;
    margin: auto;
    padding: 40px 20px;
    line-height: 1.7;
  }

  .nsfw-line {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--purple-neon);
  }

  .callout {
    background: linear-gradient(135deg, rgba(176,38,255,0.12), rgba(13,13,40,0.96));
    border-left: 3px solid var(--purple-main);
    padding: 18px;
    margin-top: 20px;
    font-size: 1.02rem;
    border-radius: 10px;
  }

  /* countdown & progress */


  .countdown-progress {
    max-width: 900px;
    margin: -20px auto 10px;
    padding: 0 20px 10px;
    display: grid;
    grid-template-columns: 1.1fr 1.1fr;
    gap: 16px;
  }

  @media (max-width: 768px) {
    .countdown-progress { grid-template-columns: 1fr; }
  }

  .card {
    background: var(--bg-card);
    border-radius: 16px;
    border: 1px solid var(--border-subtle);
    padding: 18px 18px 22px;
    box-shadow: 0 8px 26px rgba(0,0,0,0.5);
  }

  #countdown-timer {
    font-size: 1.6rem;
    font-weight: 700;
    margin-top: 6px;
    color: var(--purple-neon);
  }

  .progress-bar {
    width: 100%; height: 14px;
    background: #19192a;
    border-radius: 999px;
    overflow: hidden;
    margin: 10px 0 6px;
    border: 1px solid #2e2e4c;
  }

  #progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #f4b3ff, var(--purple-main));
    transition: width 0.4s ease-out;
  }

  /* Buy Card */

  .buy-card {
    max-width: 900px;
    margin: 0 auto 40px;
    padding: 20px;
    background: radial-gradient(circle at top left, rgba(176,38,255,0.14), #101020);
    border-radius: 16px;
    border: 1px solid #2e2e4c;
  }

  .wallet-address-row {
    margin-top: 10px;
    background: rgba(5,5,20,0.9);
    border-radius: 12px;
    padding: 10px 12px;
    display: flex;
    gap: 10px;
    cursor: pointer;
  }

  .calc-row { margin-top: 16px; display: flex; flex-direction: column; gap: 8px; }
  .calc-input {
    width: 100%; padding: 12px; border-radius: 10px;
    background: #16162a; color: #fff; border: none;
  }

  .quick-row { margin-top: 14px; display: flex; flex-wrap: wrap; gap: 8px; }

  .quick-buy-btn {
    background: #18182b; color: #f7f7ff;
    padding: 8px 14px;
    border-radius: 999px;
    font-weight: 600;
    border: 1px solid #383868;
    cursor: pointer;
  }

  .cta-row { margin-top: 16px; display: flex; gap: 10px; flex-wrap: wrap; }
  .primary-btn {
    background: var(--purple-main);
    color: #000;
    padding: 12px 20px;
    border-radius: 999px;
    font-weight: 700;
    cursor: pointer;
    flex: 1 1 150px;
  }

  /* Wallet modal */

  .wallet-modal-backdrop {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.7);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }

</style>
</head>

<body>

<header>
  <div class="logo-wrap">
    <img src="blojob.png" alt="logo">
    <h1>BLOJOB</h1>
    <h2>Solana‚Äôs Most Seductive Degenerate Token ‚ù§Ô∏è‚Äçüî•</h2>
  </div>
</header>

<div class="countdown-progress">
  <div class="card">
    <div id="countdown-label">Presale starts in</div>
    <div id="countdown-timer">--d --h --m --s</div>
  </div>

  <div class="card">
    <div class="progress-bar"><div id="progress-fill"></div></div>
    <p id="progress-amounts"></p>
  </div>
</div>

<div class="section">
  <p class="nsfw-line">You came here curious‚Ä¶</p>
</div>

<div class="buy-card">
  <h2>üíã BLOJOB Presale</h2>

  <div class="wallet-address-row" onclick="copyWallet()">
    <div id="walletBox">7982bnhc9G23KyUkcNJSJjJ2ampVQPh21P7LEM1UmoNA</div>
    <div id="copyIcon">üìã</div>
  </div>

  <div class="calc-row">
    <input id="solInput" class="calc-input" type="number" step="0.0001" placeholder="Enter SOL">
    <div id="calcResult">Enter SOL to calculate estimated BLOJOB.</div>
  </div>

  <div class="quick-row">
    <button class="quick-buy-btn" onclick="handleQuickBuy(0.1)">0.1 SOL</button>
    <button class="quick-buy-btn" onclick="handleQuickBuy(0.25)">0.25 SOL</button>
    <button class="quick-buy-btn" onclick="handleQuickBuy(0.5)">0.5 SOL</button>
    <button class="quick-buy-btn" onclick="handleQuickBuy(1)">1 SOL</button>
  </div>

  <div class="cta-row">
    <button class="primary-btn" onclick="handleConnectClick()">Connect Wallet</button>
    <button class="primary-btn" onclick="handleBuyClick()">Buy Now</button>
  </div>

  <p id="buyStatus"></p>
</div>

<!-- Wallet Modal -->
<div id="walletModalBackdrop" class="wallet-modal-backdrop">
  <div class="wallet-modal">
    <h3>Select a wallet</h3>
    <div id="walletOptions"></div>
    <button onclick="closeWalletModal()">Cancel</button>
  </div>
</div>

<script src="https://unpkg.com/@solana/web3.js@1.95.2/lib/index.iife.js"></script>

<script>
const PRESALE_WALLET = "7982bnhc9G23KyUkcNJSJjJ2ampVQPh21P7LEM1UmoNA";
const MIN_SOL = 0.1;

const presaleStart = new Date("2025-11-29T20:00:00-05:00");
const presaleEnd   = new Date(presaleStart.getTime() + 36 * 3600 * 1000);

function pad(n){return n.toString().padStart(2,'0');}

function updateCountdown(){
  const now = new Date();
  let mode, target;

  if(now < presaleStart){ mode="pre"; target=presaleStart; }
  else if(now <= presaleEnd){ mode="live"; target=presaleEnd; }
  else { mode="ended"; }

  const label = document.getElementById("countdown-label");
  const timer = document.getElementById("countdown-timer");

  if(mode==="ended"){
    timer.textContent="--:--";
    label.textContent="Presale ended";
    return;
  }

  const diff = target - now;
  const s = Math.floor(diff/1000);
  const d = Math.floor(s/86400);
  const h = Math.floor((s%86400)/3600);
  const m = Math.floor((s%3600)/60);
  const sec = s%60;

  timer.textContent = `${pad(d)}d ${pad(h)}h ${pad(m)}m ${pad(sec)}s`;
}

function copyWallet(){
  const text = document.getElementById("walletBox").textContent.trim();
  navigator.clipboard.writeText(text).catch(()=>{});
}
async function updateCalc(){
  const sol = parseFloat(document.getElementById("solInput").value);
  const resultEl = document.getElementById("calcResult");

  if(!sol){
    resultEl.textContent="Enter SOL to calculate estimated BLOJOB.";
    return;
  }

  try{
    const r = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd");
    const d = await r.json();
    const solPrice = d.solana.usd;

    const usdValue = sol * solPrice;
    const pricePerToken = 0.000001;
    const tokens = usdValue / pricePerToken;

    resultEl.textContent =
      `${sol} SOL ‚âà $${usdValue.toFixed(2)} ‚Üí ${tokens.toLocaleString()} BLOJOB`;
  } catch {
    resultEl.textContent="Error fetching SOL price.";
  }
}

let currentRaisedUSD = 0;
const softCapUSD = 6900;
const hardCapUSD = 9600;
const PRESALE_TOKENS_TOTAL = 6900000000;
const PRICE_PER_TOKEN = 0.000001;

function updateProgress(){
  const pct = Math.min(currentRaisedUSD/hardCapUSD,1)*100;
  document.getElementById("progress-fill").style.width = pct + "%";

  const softText = currentRaisedUSD >= softCapUSD
    ? "ü§§ Soft cap reached"
    : "üò™ Soft cap not reached";

  document.getElementById("progress-amounts").textContent =
    `Raised: $${currentRaisedUSD} / $${softCapUSD} ‚Ä¢ ${softText}`;
}

window.presaleAdminSetRaised = function(usd){
  currentRaisedUSD = Number(usd)||0;
  updateProgress();
};

let connection=null;
let walletPublicKey=null;
let availableWallets=[];
let selectedWallet=null;

function getStatusEl(){
  return document.getElementById("buyStatus");
}

function detectWallets(){
  availableWallets=[];

  if(window.solana){
    const label =
      window.solana.isPhantom ? "Phantom" :
      window.solana.isBackpack ? "Backpack" :
      "Solana Wallet";

    availableWallets.push({ id:"solana", name:label, provider:window.solana });
  }

  if(window.phantom && window.phantom.solana){
    if(!availableWallets.some(w=>w.provider===window.phantom.solana)){
      availableWallets.push({ id:"phantom", name:"Phantom", provider:window.phantom.solana });
    }
  }

  if(window.solflare && window.solflare.isSolflare){
    if(!availableWallets.some(w=>w.provider===window.solflare)){
      availableWallets.push({ id:"solflare", name:"Solflare", provider:window.solflare });
    }
  }

  if(window.rabby && window.rabby.solana){
    if(!availableWallets.some(w=>w.provider===window.rabby.solana)){
      availableWallets.push({ id:"rabby", name:"Rabby", provider:window.rabby.solana });
    }
  }

  const status=getStatusEl();
  if(availableWallets.length===0){
    status.textContent="No wallet detected.";
  } else if(availableWallets.length===1){
    selectedWallet=availableWallets[0];
    status.textContent=`Detected: ${selectedWallet.name}`;
  } else {
    status.textContent="Multiple wallets detected. Click Connect.";
  }
}

function openWalletModal(){
  if(!availableWallets.length) detectWallets();
  if(!availableWallets.length){
    getStatusEl().textContent="No Solana wallet detected.";
    return;
  }

  const list=document.getElementById("walletOptions");
  list.innerHTML="";

  availableWallets.forEach(w=>{
    const btn=document.createElement("button");
    btn.className="wallet-option";
    btn.textContent=w.name;
    btn.onclick=()=>{
      selectedWallet=w;
      closeWalletModal();
      getStatusEl().textContent=`Selected: ${w.name}`;
    };
    list.appendChild(btn);
  });

  document.getElementById("walletModalBackdrop").style.display="flex";
}

function closeWalletModal(){
  document.getElementById("walletModalBackdrop").style.display="none";
}

async function ensureConnection(){
  if(!connection && typeof solanaWeb3!=="undefined"){
    connection = new solanaWeb3.Connection(
      "https://api.mainnet-beta.solana.com",
      "confirmed"
    );
  }
}

async function connectWallet(){
  const status=getStatusEl();

  if(!availableWallets.length) detectWallets();
  if(!selectedWallet){
    if(availableWallets.length>1){ openWalletModal(); return null; }
    if(availableWallets.length===1){ selectedWallet=availableWallets[0]; }
    else { status.textContent="No wallet."; return null; }
  }

  const p=selectedWallet.provider;
  if(!p || typeof p.connect!=="function"){
    status.textContent="Wallet can't connect.";
    selectedWallet=null;
    return null;
  }

  try{
    const resp=await p.connect();
    walletPublicKey=resp.publicKey||p.publicKey;
    if(!walletPublicKey){ status.textContent="No public key."; return null; }

    const k=walletPublicKey.toString();
    status.textContent=`Connected: ${k.slice(0,4)}...${k.slice(-4)}`;
    return walletPublicKey;
  } catch {
    status.textContent="Wallet cancelled.";
    return null;
  }
}

function buildSolanaDeepLink(amount){
  const label=encodeURIComponent("BLOJOB Presale");
  const msg=encodeURIComponent(`Presale contribution ${amount} SOL`);
  return `solana:${PRESALE_WALLET}?amount=${amount}&label=${label}&message=${msg}`;
}

async function handleBuyClick(){
  const status=getStatusEl();

  const solAmount=parseFloat(document.getElementById("solInput").value);
  if(!solAmount){ status.textContent="Enter SOL."; return; }
  if(solAmount<MIN_SOL){ status.textContent=`Minimum ${MIN_SOL} SOL`; return; }

  await ensureConnection();

  if(!availableWallets.length || !window.solanaWeb3 || !connection){
    window.location.href=buildSolanaDeepLink(solAmount);
    return;
  }

  if(!walletPublicKey){
    const pk=await connectWallet();
    if(!pk) return;
  }

  try{
    status.textContent="Creating transaction‚Ä¶";

    const to=new solanaWeb3.PublicKey(PRESALE_WALLET);
    const lamports=Math.round(solAmount*solanaWeb3.LAMPORTS_PER_SOL);

    const {blockhash}=await connection.getLatestBlockhash("finalized");

    const tx=new solanaWeb3.Transaction({
      recentBlockhash:blockhash,
      feePayer:walletPublicKey
    });

    tx.add(
      solanaWeb3.SystemProgram.transfer({
        fromPubkey:walletPublicKey,
        toPubkey:to,
        lamports
      })
    );

    status.textContent="Approve in wallet‚Ä¶";

    const provider=selectedWallet.provider;
    let sig;

    if(typeof provider.signAndSendTransaction==="function"){
      const r=await provider.signAndSendTransaction(tx);
      sig=r.signature||r;
    } else if(typeof provider.sendTransaction==="function"){
      sig=await provider.sendTransaction(tx,connection);
    } else {
      window.location.href=buildSolanaDeepLink(solAmount);
      return;
    }

    status.innerHTML =
      `Sent! <a href="https://solscan.io/tx/${sig}" target="_blank">View TX</a>`;

  } catch(e){
    status.textContent="Transaction failed.";
  }
}

function handleQuickBuy(amount){
  document.getElementById("solInput").value=amount;
  updateCalc();
  handleBuyClick();
}

document.addEventListener("DOMContentLoaded",()=>{
  document.getElementById("solInput").addEventListener("input",updateCalc);
  updateCountdown();
  updateProgress();
  setInterval(updateCountdown,1000);
  detectWallets();
  window.addEventListener("load",detectWallets);
});
</script>

</body>
</html>
